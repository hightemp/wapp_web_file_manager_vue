(function(){"use strict";var e={1256:function(e,t,i){i(9029);var s=i(9963),l=i(6252),a=i(3577);const n={class:"wrapper"},o={class:"account-panel"},r={class:"account-control-panel"},c=(0,l._)("input",{type:"text",class:"form-control"},null,-1),d=(0,l._)("i",{class:"bi bi-pencil"},null,-1),p=[d],u={class:"list-group"},m=["onClick"],b={class:"files-panel"},h={class:"files-control-panel"},f=(0,l._)("i",{class:"bi bi-layout-three-columns"},null,-1),_=[f],w=(0,l._)("i",{class:"bi bi-ui-checks-grid"},null,-1),v=[w],g=(0,l._)("i",{class:"bi bi-ui-checks"},null,-1),y=[g],F={key:0,class:"files-list-as-grid-wrapper"},k={class:"files-grid-control-panel"},C=(0,l._)("i",{class:"bi bi-arrow-left"},null,-1),R=[C],S=(0,l._)("i",{class:"bi bi-arrow-up"},null,-1),D=[S],I=(0,l._)("i",{class:"bi bi-arrow-right"},null,-1),P=[I],x={class:"path"},E={class:"path-wrapper"},T={class:"bi bi-play-fill"},L=["onClick"],U={class:"files-list-wrapper_grid-box-wrapper"},O={class:"files-list-wrapper_grid-box"},H=["onClick"],A={class:"icon-wrapper"},N={class:"icon"},G=(0,l._)("i",{class:"bi bi-folder-fill"},null,-1),B=[G],z={class:"icon"},Y=(0,l._)("i",{class:"bi bi-file-earmark-text-fill"},null,-1),W=[Y],M={class:"title"},K={key:1,class:"files-list-as-list-wrapper"},j={class:"files-list-control-panel"},q=(0,l._)("i",{class:"bi bi-arrow-left"},null,-1),J=[q],V=(0,l._)("i",{class:"bi bi-arrow-up"},null,-1),Z=[V],$=(0,l._)("i",{class:"bi bi-arrow-right"},null,-1),Q=[$],X={class:"path"},ee={class:"path-wrapper"},te={class:"bi bi-play-fill"},ie=["onClick"],se={class:"files-list-wrapper_list-box"},le={class:"files-list-list"},ae=(0,l._)("div",{class:"list-row header"},[(0,l._)("div",null,"name"),(0,l._)("div",null,"size"),(0,l._)("div",null,"created at"),(0,l._)("div",null,"modified at")],-1),ne=["onClick"],oe={class:"filename-cell"},re={key:0,class:"icon"},ce=(0,l._)("i",{class:"bi bi-folder-fill"},null,-1),de=[ce],pe={key:1,class:"icon"},ue=(0,l._)("i",{class:"bi bi-file-earmark-text-fill"},null,-1),me=[ue],be={class:"title"},he={key:2,class:"files-list-wrapper",ref:"files_list_wrapper"},fe={class:"files-list-wrapper_box"},_e=["onClick"],we={class:"icon"},ve=(0,l._)("i",{class:"bi bi-folder-fill"},null,-1),ge=[ve],ye={class:"icon"},Fe=(0,l._)("i",{class:"bi bi-file-earmark-text-fill"},null,-1),ke=[Fe],Ce={class:"page-preview"},Re={class:"code-preview"},Se=["innerHTML"],De={class:"image-preview"},Ie=["src"],Pe={class:"loader"},xe=(0,l._)("div",{class:"center"},[(0,l._)("div",{class:"lds-dual-ring"})],-1),Ee=[xe],Te=(0,l._)("div",{class:"block-overlay"},null,-1),Le={id:"modal-ask-api-key",class:"modal show",tabindex:"-1"},Ue={class:"modal-dialog"},Oe={class:"modal-content"},He=(0,l._)("div",{class:"modal-header"},[(0,l._)("h5",{class:"modal-title"},"Данные репозитория")],-1),Ae={class:"modal-body",style:{height:"500px","overflow-y":"scroll"}},Ne={class:"modal-ask-api_list_buttons"},Ge=(0,l._)("div",null,null,-1),Be={class:"mb-3"},ze=(0,l._)("label",{for:"",class:"form-label"},"Логин",-1),Ye=(0,l._)("option",{value:"github"},"github",-1),We=(0,l._)("option",{value:"webdav"},"webdav",-1),Me=[Ye,We],Ke={class:"mb-3"},je=(0,l._)("label",{for:"",class:"form-label"},"Название",-1),qe={class:"mb-3"},Je=(0,l._)("label",{for:"",class:"form-label"},"Логин",-1),Ve={class:"mb-3"},Ze=(0,l._)("label",{for:"",class:"form-label"},"Репозиторий",-1),$e={class:"mb-3"},Qe=(0,l._)("label",{for:"",class:"form-label"},"API Ключ",-1),Xe={class:"mb-3"},et=(0,l._)("label",{for:"",class:"form-label"},"URL",-1),tt={class:"mb-3"},it=(0,l._)("label",{for:"",class:"form-label"},"Пользователь",-1),st={class:"mb-3"},lt=(0,l._)("label",{for:"",class:"form-label"},"Пароль",-1),at={class:"modal-ask-api_list_buttons"},nt=(0,l._)("div",null,null,-1),ot={class:"list-repo-item_desc"},rt={class:"list-repo-item_title"},ct={class:"list-repo-item_type"},dt={class:"list-repo-item_name"},pt=(0,l._)("b",null,"login:",-1),ut=(0,l._)("b",null,"repo:",-1),mt=(0,l._)("b",null,"key:",-1),bt=(0,l._)("b",null,"url:",-1),ht=(0,l._)("b",null,"username:",-1),ft=(0,l._)("b",null,"password:",-1),_t=["onClick"],wt=(0,l._)("i",{class:"bi bi-pencil"},null,-1),vt=[wt],gt=["onClick"],yt=(0,l._)("i",{class:"bi bi-trash"},null,-1),Ft=[yt],kt={class:"modal-footer"};function Ct(e,t,i,d,f,w){return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",n,[(0,l._)("div",o,[(0,l._)("div",r,[c,(0,l._)("button",{class:(0,a.C_)("btn "),onClick:t[0]||(t[0]=e=>f.bShowEditRepoWindow=!0)},p)]),(0,l._)("div",u,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.aRepos,((e,t)=>((0,l.wg)(),(0,l.iD)("button",{key:e,type:"button",class:(0,a.C_)("list-group-item list-group-item-action "+(f.iActiveRepo==t?"active":"")),"aria-current":"true",onClick:i=>w.fnSlectRepo(t,e)},(0,a.zw)(e.name),11,m)))),128))])]),(0,l._)("div",b,[(0,l._)("div",h,[(0,l._)("button",{class:(0,a.C_)("btn "+("column"==f.sFilesListType?"btn-primary":"")),onClick:t[1]||(t[1]=e=>f.sFilesListType="column")},_,2),(0,l._)("button",{class:(0,a.C_)("btn "+("grid"==f.sFilesListType?"btn-primary":"")),onClick:t[2]||(t[2]=e=>f.sFilesListType="grid")},v,2),(0,l._)("button",{class:(0,a.C_)("btn "+("list"==f.sFilesListType?"btn-primary":"")),onClick:t[3]||(t[3]=e=>f.sFilesListType="list")},y,2)]),"grid"==f.sFilesListType?((0,l.wg)(),(0,l.iD)("div",F,[(0,l._)("div",k,[(0,l._)("button",{class:(0,a.C_)("btn "),onClick:t[4]||(t[4]=(...t)=>e.fnGoPrev&&e.fnGoPrev(...t))},R),(0,l._)("button",{class:(0,a.C_)("btn "),onClick:t[5]||(t[5]=(...e)=>w.fnGoUp&&w.fnGoUp(...e))},D),(0,l._)("button",{class:(0,a.C_)("btn "),onClick:t[6]||(t[6]=(...t)=>e.fnGoNext&&e.fnGoNext(...t))},P),(0,l._)("div",x,[(0,l._)("div",E,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.aPath,((e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:e},[(0,l.wy)((0,l._)("i",T,null,512),[[s.F8,t>0]]),(0,l._)("div",{class:"path-link",onClick:e=>w.fnOpenPathByIndex(t)},(0,a.zw)(e),9,L)],64)))),128))])])]),(0,l._)("div",U,[(0,l._)("div",O,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.aFiles,(e=>((0,l.wg)(),(0,l.iD)("button",{key:e,type:"button",class:(0,a.C_)("list-group-item list-group-item-action file-grid-item "+(f.iSelectedFileColumn==f.aPath.length-1&&f.sSelectedFileName==e.name?"file-selected ":"")),"aria-current":"true",onClick:t=>w.fnClickFileItem(e)},[(0,l._)("div",A,[(0,l.wy)((0,l._)("span",N,B,512),[[s.F8,"directory"==e.type]]),(0,l.wy)((0,l._)("span",z,W,512),[[s.F8,"file"==e.type]])]),(0,l._)("div",M,(0,a.zw)(e.name),1)],10,H)))),128))])])])):(0,l.kq)("",!0),"list"==f.sFilesListType?((0,l.wg)(),(0,l.iD)("div",K,[(0,l._)("div",j,[(0,l._)("button",{class:(0,a.C_)("btn "),onClick:t[7]||(t[7]=(...t)=>e.fnGoPrev&&e.fnGoPrev(...t))},J),(0,l._)("button",{class:(0,a.C_)("btn "),onClick:t[8]||(t[8]=(...e)=>w.fnGoUp&&w.fnGoUp(...e))},Z),(0,l._)("button",{class:(0,a.C_)("btn "),onClick:t[9]||(t[9]=(...t)=>e.fnGoNext&&e.fnGoNext(...t))},Q),(0,l._)("div",X,[(0,l._)("div",ee,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.aPath,((e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:e},[(0,l.wy)((0,l._)("i",te,null,512),[[s.F8,t>0]]),(0,l._)("div",{class:"path-link",onClick:e=>w.fnOpenPathByIndex(t)},(0,a.zw)(e),9,ie)],64)))),128))])])]),(0,l._)("div",se,[(0,l._)("div",le,[ae,((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.aFiles,(e=>((0,l.wg)(),(0,l.iD)("div",{key:e,class:(0,a.C_)("list-row "+(f.iSelectedFileColumn==f.aPath.length-1&&f.sSelectedFileName==e.name?"file-selected ":"")),onClick:t=>w.fnClickFileItem(e)},[(0,l._)("div",oe,["directory"==e.type?((0,l.wg)(),(0,l.iD)("span",re,de)):(0,l.kq)("",!0),"file"==e.type?((0,l.wg)(),(0,l.iD)("span",pe,me)):(0,l.kq)("",!0),(0,l._)("div",be,(0,a.zw)(e.name),1)]),(0,l._)("div",null,(0,a.zw)(e.human_size),1),(0,l._)("div",null,(0,a.zw)(e.created_at),1),(0,l._)("div",null,(0,a.zw)(e.updated_at),1)],10,ne)))),128))])])])):(0,l.kq)("",!0),"column"==f.sFilesListType?((0,l.wg)(),(0,l.iD)("div",he,[(0,l._)("div",fe,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.aFilesColumns,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:e,class:"list-group files-list"},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e,(e=>((0,l.wg)(),(0,l.iD)("button",{key:e,type:"button",class:(0,a.C_)("list-group-item list-group-item-action file-item "+(e.name==f.aPath[t+1]?"active ":"")+(f.iSelectedFileColumn==t&&f.sSelectedFileName==e.name?"file-selected ":"")),onClick:i=>w.fnClickFileItem(e,t)},[(0,l.wy)((0,l._)("span",we,ge,512),[[s.F8,"directory"==e.type]]),(0,l.wy)((0,l._)("span",ye,ke,512),[[s.F8,"file"==e.type]]),(0,l.Uk)(" "+(0,a.zw)(e.name),1)],10,_e)))),128))])))),128))])],512)):(0,l.kq)("",!0)]),(0,l._)("div",Ce,[(0,l.wy)((0,l._)("div",Re,[(0,l._)("code",{class:"code",innerHTML:f.sCode},null,8,Se)],512),[[s.F8,"code"==f.sPreviewShow]]),(0,l.wy)((0,l._)("div",De,[(0,l._)("img",{src:f.sImagePath},null,8,Ie)],512),[[s.F8,"image"==f.sPreviewShow]])])]),(0,l.wy)((0,l._)("div",Pe,Ee,512),[[s.F8,f.bShowLoader]]),(0,l.wy)((0,l._)("div",null,[Te,(0,l._)("div",Le,[(0,l._)("div",Ue,[(0,l._)("div",Oe,[He,(0,l._)("div",Ae,[null!==f.iEditIndex?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",Ne,[Ge,(0,l._)("div",null,[(0,l._)("button",{type:"button",class:"btn btn-danger",onClick:t[10]||(t[10]=(...e)=>w.fnCancelRepo&&w.fnCancelRepo(...e))},"Отмена"),(0,l._)("button",{type:"button",class:"btn btn-primary",onClick:t[11]||(t[11]=(...e)=>w.fnSaveRepo&&w.fnSaveRepo(...e))},"Сохранить")])]),(0,l._)("div",Be,[ze,(0,l.wy)((0,l._)("select",{class:"form-control","onUpdate:modelValue":t[12]||(t[12]=e=>f.sFormType=e)},Me,512),[[s.bM,f.sFormType]])]),(0,l._)("div",Ke,[je,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[13]||(t[13]=t=>e.sFormName=t)},null,512),[[s.nr,e.sFormName]])]),"github"==f.sFormType?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",qe,[Je,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[14]||(t[14]=e=>f.sFormLogin=e)},null,512),[[s.nr,f.sFormLogin]])]),(0,l._)("div",Ve,[Ze,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[15]||(t[15]=e=>f.sFormRepo=e)},null,512),[[s.nr,f.sFormRepo]])]),(0,l._)("div",$e,[Qe,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[16]||(t[16]=e=>f.sFormKey=e)},null,512),[[s.nr,f.sFormKey]])])],64)):(0,l.kq)("",!0),"webdav"==f.sFormType?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l._)("div",Xe,[et,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[17]||(t[17]=e=>f.sFormURL=e)},null,512),[[s.nr,f.sFormURL]])]),(0,l._)("div",tt,[it,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[18]||(t[18]=t=>e.sFormUsername=t)},null,512),[[s.nr,e.sFormUsername]])]),(0,l._)("div",st,[lt,(0,l.wy)((0,l._)("input",{type:"text",class:"form-control","onUpdate:modelValue":t[19]||(t[19]=t=>e.sFormPassword=t)},null,512),[[s.nr,e.sFormPassword]])])],64)):(0,l.kq)("",!0)],64)):((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l._)("div",at,[nt,(0,l._)("div",null,[(0,l._)("button",{class:"btn btn-secondary",onClick:t[20]||(t[20]=(...t)=>e.fnExport&&e.fnExport(...t))},"Экспортировать"),(0,l._)("button",{class:"btn btn-danger",onClick:t[21]||(t[21]=(...e)=>w.fnCleanRepo&&w.fnCleanRepo(...e))},"Очистить"),(0,l._)("button",{class:"btn btn-success",onClick:t[22]||(t[22]=(...e)=>w.fnNewRepo&&w.fnNewRepo(...e))},"Добавить")])]),((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(f.aRepos,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{key:t,class:(0,a.C_)("list-repo-item "+(f.iSelectedRepoIndex==t?"active":""))},[e?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",ot,[(0,l._)("div",rt,[(0,l._)("div",ct,(0,a.zw)(e.type),1),(0,l._)("div",dt,(0,a.zw)(e.name),1)]),"github"==e.type?((0,l.wg)(),(0,l.iD)(l.HY,{key:0},[(0,l._)("div",null,[pt,(0,l.Uk)(" "+(0,a.zw)(e.login),1)]),(0,l._)("div",null,[ut,(0,l.Uk)(" "+(0,a.zw)(e.repo),1)]),(0,l._)("div",null,[mt,(0,l.Uk)(" "+(0,a.zw)(e.key),1)])],64)):(0,l.kq)("",!0),"webdav"==e.type?((0,l.wg)(),(0,l.iD)(l.HY,{key:1},[(0,l._)("div",null,[bt,(0,l.Uk)(" "+(0,a.zw)(e.url),1)]),(0,l._)("div",null,[ht,(0,l.Uk)(" "+(0,a.zw)(e.username),1)]),(0,l._)("div",null,[ft,(0,l.Uk)(" "+(0,a.zw)(e.password),1)])],64)):(0,l.kq)("",!0)]),(0,l._)("div",null,[(0,l._)("button",{class:"btn btn-success",onClick:e=>w.fnEditRepo(t),title:"Редактировать"},vt,8,_t),(0,l._)("button",{class:"btn btn-danger",onClick:e=>w.fnRemoveRepo(t),title:"Удалить"},Ft,8,gt)])],64)):(0,l.kq)("",!0)],2)))),128))],64))]),(0,l._)("div",kt,[(0,l._)("button",{class:"btn btn-success",onClick:t[23]||(t[23]=(...e)=>w.fnCloseRepoWindow&&w.fnCloseRepoWindow(...e))},"Ok")])])])])],512),[[s.F8,f.bShowEditRepoWindow]])],64)}var Rt=i(3473),St=i(9478),Dt=i(2300),It=i(4279),Pt=i.n(It);const xt=new(Pt());function Et(e,t=!0,i=1){const s=t?1e3:1024;if(Math.abs(e)<s)return e+" B";const l=t?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"];let a=-1;const n=10**i;do{e/=s,++a}while(Math.round(Math.abs(e)*n)/n>=s&&a<l.length-1);return e.toFixed(i)+" "+l[a]}class Tt{static oDatabase={groups_last_id:0,groups:[],categories_last_id:0,categories:[],articles_last_id:0,articles:[],favorites_last_id:0,favorites:[],tags_last_id:0,tags:[],tags_relations_last_id:0,tags_relations:[],links_last_id:0,links:[]};static octokit=null;static SHA="";static webdav=null;static oRepoItem=null;static DATABASE_PATH="notes-database.json";static DATABASE_UPDATE_TIMEOUT=3e4;static fnInit(e){Tt.oRepoItem=e,"github"==e.type&&Tt.fnInitGit(),"webdav"==e.type&&Tt.fnInitWebdav()}static fnInitGit(){Tt.octokit=new Rt.v({auth:Tt.oRepoItem.key})}static fnInitWebdav(){Tt.webdav=(0,St.createClient)(Tt.oRepoItem.url,{username:Tt.oRepoItem.username,password:Tt.oRepoItem.password})}static fnFirstLoadDatabase(){_s("Database.fnFirstLoadDatabase")}static fnList(e){return"github"==Tt.oRepoItem.type?Tt.fnListGithub(e):"webdav"==Tt.oRepoItem.type?Tt.fnListWebdav(e):void 0}static fnReadFile(e){return"github"==Tt.oRepoItem.type?Tt.fnReadFileGithub(e):"webdav"==Tt.oRepoItem.type?Tt.fnReadFileWebdav(e):void 0}static fnWriteFile(e,t){return"github"==Tt.oRepoItem.type?Tt.fnWriteDatabaseGithub():"webdav"==Tt.oRepoItem.type?Tt.fnWriteDatabaseWebdav():void 0}static fnGetSHADatabase(){return new Promise(((e,t)=>{Database.SHA||Database.octokit.rest.repos.getContent({owner:Database.sLogin,repo:Database.sRepo,path:Database.DATABASE_PATH}).then((({data:t})=>{Database.SHA=t.sha,e(Database.SHA),xt.emit("database-get-sha-success")})).catch((e=>{t(e),xt.emit("database-get-sha-error")}))}))}static fnListGithub(e){var t=Tt.oRepoItem;return new Promise((async(i,s)=>{try{var l=await Tt.octokit.rest.repos.getContent({owner:t.login,repo:t.repo,path:e});i(l)}catch(oE){s(oE)}}))}static fnListWebdav(e){Tt.oRepoItem;return new Promise((async(t,i)=>{try{var s=await Tt.webdav.getDirectoryContents(e);"/"!=e&&(s=s.splice(1)),s=s.map((e=>({name:e.basename,type:e.type,size:e.size,human_size:Et(e.size),updated_at:new Date(e.lastmod).toLocaleString("ru-RU")}))),t(s)}catch(oE){console.error(oE),t([])}}))}static fnReadFileWebdav(e){Tt.oRepoItem;return new Promise((async(t,i)=>{try{var s=await Tt.webdav.getFileContents(e),l=new TextDecoder("utf-8"),a=l.decode(s);t(a)}catch(oE){console.error(oE),t("")}}))}static fnReadFileGithub(e){var t=Tt.oRepoItem;return Tt.octokit.rest.repos.getContent({owner:t.login,repo:t.repo,path:e}).then((({data:e})=>(Tt.oDatabase=JSON.parse((0,Dt.Jx)(e.content)),Tt.SHA=e.sha,Tt.oDatabase))).catch(((...e)=>{console.error(oE),fnResolv("")}))}static fnWriteDatabaseGithub(){_s("Database.fnWriteNotesDatabase");var e=JSON.stringify(Tt.oDatabase,null,4),t=Tt.oRepoItem;return Tt.octokit.rest.repos.createOrUpdateFileContents({owner:t.sLogin,repo:t.sRepo,path:Tt.DATABASE_PATH,sha:Tt.SHA,message:Tt.fnGetUpdateMessage(),content:(0,Dt.cv)(e)}).then((()=>{xt.emit("database-db-saved")})).catch(((...e)=>{xt.emit("database-db-error",e[0]+""),xt.emit("database-db-save-error",e[0]+"")}))}static fnWriteDatabaseWebdav(){var e=JSON.stringify(Tt.oDatabase,null,4);Tt.oRepoItem;return new Promise((async(t,i)=>{try{var s=new TextEncoder,l=s.encode(e);await Tt.webdav.putFileContents(Tt.DATABASE_PATH,l,{contentLength:!1,overwrite:!0}),xt.emit("database-db-saved")}catch(oE){throw xt.emit("database-db-error",oE+""),xt.emit("database-db-save-error",oE+""),/Not Found/.test(oE+"")?(xt.emit("database-db-load-error-notfound",oE+""),xt.emit("database-db-save")):xt.emit("database-db-load-error-github-exception",oE+""),oE}}))}static fnGetUpdateMessage(){return"update: "+new Date}static fnUpdateNoteDatabase(){}}const Lt={class:"dropdown"},Ut=["onClick","innerHTML"];function Ot(e,t,i,s,n,o){return(0,l.wg)(),(0,l.iD)("div",Lt,[(0,l._)("a",{class:"btn dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:t[0]||(t[0]=(...e)=>o.fnMenuOpen&&o.fnMenuOpen(...e))}),(0,l._)("ul",{class:(0,a.C_)("dropdown-menu "+(n.bOpened?"show":""))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(n.aItems,(e=>((0,l.wg)(),(0,l.iD)("li",{key:e.id},[(0,l._)("a",{class:"dropdown-item",href:"#",onClick:t=>o.fnOnItemClick(e),innerHTML:e.title},null,8,Ut)])))),128))],2)])}var Ht={props:["items"],emits:["clickitem"],data(){return{aItems:this.items,bOpened:!1}},methods:{fnFocusOut(){this.bOpened=!1},fnMenuOpen(){this.bOpened=!this.bOpened},fnOnItemClick(e){this.bOpened=!1,this.$emit("clickitem",e)}},created(){window.addEventListener("click",(e=>{this.$el.contains(e.target)||(this.bOpened=!1)}))}},At=i(3744);const Nt=(0,At.Z)(Ht,[["render",Ot]]);var Gt=Nt;const Bt=["onClick"],zt={class:"icon"},Yt=(0,l._)("i",{class:"bi bi-folder-fill"},null,-1),Wt=[Yt],Mt={class:"icon"},Kt=(0,l._)("i",{class:"bi bi-file-earmark-text-fill"},null,-1),jt=[Kt];function qt(e,t,i,n,o,r){return(0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(r.aFiles,(e=>((0,l.wg)(),(0,l.iD)("button",{key:e,type:"button",class:(0,a.C_)("list-group-item list-group-item-action file-item"+(e.name==r.sSelectedDir?"active":"")),onClick:t=>r.fnItemClick(e,r.iColumnIndex)},[(0,l.wy)((0,l._)("span",zt,Wt,512),[[s.F8,"directory"==e.type]]),(0,l.wy)((0,l._)("span",Mt,jt,512),[[s.F8,"file"==e.type]]),(0,l.Uk)(" "+(0,a.zw)(e.name),1)],10,Bt)))),128)}var Jt={name:"TestFiles",emits:["clickitem"],props:["files","columnindex","selecteddir"],methods:{fnItemClick(e){this.$emit("clickitem",e)}},computed:{aFiles(){return this.files},iColumnIndex(){return this.columnindex},sSelectedDir(){return this.selecteddir}}};const Vt=(0,At.Z)(Jt,[["render",qt]]);var Zt=Vt,$t=i(8128),Qt={name:"App",components:{FilesColumnList:Zt,Dropdown:Gt},methods:{fnSlectRepo(e,t){this.iActiveRepo=e,Tt.fnInit(t),this.fnResetPath(),this.fnSelectPath("/")},fnResetPath(){this.aFiles=[],this.aFilesColumns=[]},fnSelectPath(e){var t=this;t.aPath.push(e),t.bShowLoader=!0,Tt.fnList("/"+this.aPath.join("/")).then((e=>{t.aFiles=e,t.aFilesColumns.push(e),t.bShowLoader=!1,setTimeout((()=>{t.$refs.files_list_wrapper.scrollLeft=1e4}),200)}))},fnClickFileItem(e,t){if("directory"==e.type)void 0!==t&&t<this.aFilesColumns.length-1&&(this.aFilesColumns.splice(t+1),this.aPath.splice(t+1)),this.fnSelectPath(e.name);else{void 0==t&&(t=this.aPath.length-1);var i=this.aPath.slice();console.log(i),i.splice(t+1),console.log(i),this.sSelectedFileName=e.name,this.iSelectedFileColumn=t,this.sSelectedFilePath=i.join("/"),this.sSelectedFile=this.sSelectedFilePath+"/"+this.sSelectedFileName;var s=this.sSelectedFileName.split(".").splice(-1),l=s[0]+"";l=l.toLowerCase(),~this.aImagesTypes.indexOf(l)?(this.sPreviewShow="image",this.sImagePath=this.aRepos[this.iActiveRepo].url+this.sSelectedFile):~this.aTextTypes.indexOf(l)?(this.sPreviewShow="code",Tt.fnReadFile(this.sSelectedFile).then((e=>{this.sCode=$t.highlightAuto(e).value}))):this.sPreviewShow="binary"}},fnGoUp(){if(1!=this.aPath.length){var e=this.aFilesColumns.length-1,t=this.aPath[this.aPath.length-2];this.aFilesColumns.splice(e-1),this.aPath.splice(e-1),this.fnSelectPath(t)}},fnOpenPathByIndex(e){var t=this.aPath[e];this.aFilesColumns.splice(e),this.aPath.splice(e),this.fnSelectPath(t)},fnSaveRepo(){if(this.sFormName){var e={name:this.sFormName,login:this.sFormLogin,repo:this.sFormRepo,key:this.sFormKey,type:this.sFormType,url:this.sFormURL,username:this.sFormUsername,password:this.sFormPassword};-1==this.iEditIndex?this.aRepos.push(e):this.aRepos.splice(this.iEditIndex,1,e),localStorage.setItem("aRepos",JSON.stringify(this.aRepos)),this.iEditIndex=null}else alert("Надо заполнить поле - Название")},fnNewRepo(){this.iEditIndex=-1,this.sFormName="",this.sFormLogin="",this.sFormRepo="",this.sFormKey="",this.sFormType="github",this.sFormURL="",this.sFormUsername="",this.sFormPassword=""},fnEditRepo(e){this.iEditIndex=e,this.sFormName=this.aRepos[this.iEditIndex].name,this.sFormLogin=this.aRepos[this.iEditIndex].login,this.sFormRepo=this.aRepos[this.iEditIndex].repo,this.sFormKey=this.aRepos[this.iEditIndex].key,this.sFormType=this.aRepos[this.iEditIndex].type,this.sFormURL=this.aRepos[this.iEditIndex].url,this.sFormUsername=this.aRepos[this.iEditIndex].username,this.sFormPassword=this.aRepos[this.iEditIndex].password},fnRemoveRepo(e){this.aRepos.splice(e,1),localStorage.setItem("aRepos",JSON.stringify(this.aRepos))},fnCleanRepo(){this.aRepos=[],localStorage.setItem("aRepos",JSON.stringify(this.aRepos))},fnCancelRepo(){this.iEditIndex=null},fnCloseRepoWindow(){this.bShowEditRepoWindow=!1}},data(){var e=JSON.parse(localStorage.getItem("aRepos")||"[]");return{bShowLoader:!1,bShowBlocker:!1,bShowEditRepoWindow:!0,iSelectedFileColumn:null,sSelectedFilePath:null,sSelectedFile:null,sSelectedFileName:null,sCode:"",sImagePath:"",iEditIndex:null,iSelectedRepoIndex:null,sFormLogin:"",sFormRepo:"",sFormKey:"",sFormURL:"",sFormType:"github",sFilesListType:"column",sPreviewShow:"code",iGridPage:0,aRepoItemMenu:[{id:"edit",title:'<i class="bi bi-pencil"></i> Редактировать'},{id:"delete",title:'<i class="bi bi-trash"></i> Удалить'}],aRepoMenu:[{id:"reload",title:'<i class="bi bi-arrow-repeat"></i> Обновить'},{id:"add",title:'<i class="bi bi-plus-lg"></i> Добавить'}],aMenu:[],aPathHistory:[],iActiveRepo:null,aRepos:e,aPath:[],aFiles:[],aFilesColumns:[],aImagesTypes:["png","jpeg","jpg","gif","bmp","svg","avif"],aTextTypes:["txt","js","css","php","py","sh","json","md"]}},created(){}};const Xt=(0,At.Z)(Qt,[["render",Ct]]);var ei=Xt;(0,s.ri)(ei).mount("#app")}},t={};function i(s){var l=t[s];if(void 0!==l)return l.exports;var a=t[s]={exports:{}};return e[s](a,a.exports,i),a.exports}i.m=e,function(){var e=[];i.O=function(t,s,l,a){if(!s){var n=1/0;for(d=0;d<e.length;d++){s=e[d][0],l=e[d][1],a=e[d][2];for(var o=!0,r=0;r<s.length;r++)(!1&a||n>=a)&&Object.keys(i.O).every((function(e){return i.O[e](s[r])}))?s.splice(r--,1):(o=!1,a<n&&(n=a));if(o){e.splice(d--,1);var c=l();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,l,a]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={143:0};i.O.j=function(t){return 0===e[t]};var t=function(t,s){var l,a,n=s[0],o=s[1],r=s[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(l in o)i.o(o,l)&&(i.m[l]=o[l]);if(r)var d=r(i)}for(t&&t(s);c<n.length;c++)a=n[c],i.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return i.O(d)},s=self["webpackChunkwapp_web_file_manager_vue"]=self["webpackChunkwapp_web_file_manager_vue"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=i.O(void 0,[998],(function(){return i(1256)}));s=i.O(s)})();
//# sourceMappingURL=app.6c6e0916.js.map